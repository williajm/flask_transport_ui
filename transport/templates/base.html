{% extends 'bootstrap/base.html' %} {% block title %}Train times{% endblock
title %} {% block navbar %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.3/socket.io.min.js" integrity="sha384-tne+3a+31XkO9UsBpSQGHvKKBjGShjZ/CWKLLAVOxK72Bb6X/EFaXRhrxGiaYyF1" crossorigin="anonymous"></script>
<script src="{{url_for('static',filename='js/train.js')}}"></script>
<link
  rel="stylesheet"
  href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css"
  integrity="sha384-Nlo8b0yiGl7Dn+BgLn4mxhIIBU6We7aeeiulNCjHdUv/eKHx59s3anfSUjExbDxn"
  crossorigin="anonymous"
/>
<script src="https://code.jquery.com/jquery-1.12.4.js" integrity="sha384-KcyRSlC9FQog/lJsT+QA8AUIFBgnwKM7bxm7/YaX+NTr4D00npYawrX0h+oXI3a2" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha384-JPbtLYL10d/Z1crlc6GGGGM3PavCzzoUJ1UxH0bXHOfguWHQ6XAWrIzW+MBGGXe5" crossorigin="anonymous"></script>

<div class="container-fluid">
  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">Train Times</a>
      </div>
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Departures</a></li>
        <li><a href="#">Arrivals</a></li>
      </ul>
      <div class="pull-right">
        <form class="form-inline" id="search_form">
          <label>
            <input class="form-control" type="text" id="search_data" />
            <input type="submit" value="search" id="search_button" />
          </label>
        </form>
      </div>
    </div>
  </nav>
</div>
<script>
  $("#search_data").autocomplete({
    source: function (request, response) {
      $.getJSON(
        "{{url_for('autocomplete')}}",
        {
          q: request.term,
        },
        function (data) {
          response(data.matching_results);
        }
      );
    },
    select: function (e, ui) {
      console.log("autocomplete selection", ui.item);
      document.getElementById("search_data").value = ui.item.value;
      <!-- trigger event does not invoke the event listener so use dispatch event -->
      var evt = document.createEvent("Event");
      evt.initEvent("submit", true, true);
      document.getElementById("search_form").dispatchEvent(evt);
    },
  });
</script>
{%- endblock %} {% block content %} {% endblock %}
